Name: Convert JSON to CSS
  run: |
    node - <<'EOF'
    const fs = require('fs');

    const json = JSON.parse(fs.readFileSync('design-tokens.tokens.json', 'utf8'));
    let css = ':root {\n';

    function toKebab(str) {
      return str.replace(/\s+/g, '-').toLowerCase();
    }

    function walk(obj, prefix = '') {
      for (const key in obj) {
        const info = obj[key];
        if (info.type === 'color') {
          css += `  --${prefix}${toKebab(key)}: ${info.value};\n`;
        } else if (info.type === 'custom-fontStyle') {
          const value = info.value;
          const fontPrefix = `${prefix}${toKebab(key)}-`;
          css += `  --${fontPrefix}font-family: ${value.fontFamily};\n`;
          css += `  --${fontPrefix}font-size: ${value.fontSize}px;\n`;
          css += `  --${fontPrefix}font-weight: ${value.fontWeight};\n`;
          css += `  --${fontPrefix}line-height: ${value.lineHeight}%;\n`;
          css += `  --${fontPrefix}letter-spacing: ${value.letterSpacing};\n`;
          css += `  --${fontPrefix}text-decoration: ${value.textDecoration};\n`;
          css += `  --${fontPrefix}text-case: ${value.textCase};\n`;
        } else if (typeof info === 'object') {
          walk(info, `${prefix}${toKebab(key)}-`);
        }
      }
    }

    walk(json);
    css += '}\n';

    fs.writeFileSync('design-tokens.css', css);
    console.log('âœ… design-tokens.css generated!');
    EOF
